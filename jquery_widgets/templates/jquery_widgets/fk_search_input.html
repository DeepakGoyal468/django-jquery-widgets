{{rendered}}
<style type="text/css" media="screen">
	#lookup_{{ name }} {
		{% if admin_icons %}
		padding-right:16px;
		background: url({{ admin_media_prefix }}img/admin/selector-search.gif) no-repeat right;
		{% endif %}
	}
	ul.ui-menu li {
		list-style-type: none;
	}
	#del_{{ name }} {
				display: none;
	}
</style>
<input type="text" id="lookup_{{name}}" value="{{label}}" />
<a href="#" id="del_{{name}}">
	{% if admin_icons %}
	<img src="{{ admin_media_prefix }}img/admin/icon_deletelink.gif" />
	{% else %}
	X
	{% endif %}
</a>
<script type="text/javascript">
$(function() {
	$("#lookup_{{name}}").autocomplete({
		source: function(request, response) {
			$.ajax({
				url: '{% url jquery-widgets:fk-search %}',
				data: {
					q: request.term,
					search_fields: '{{search_fields}}',
					app_label: '{{app_label}}',
					model_name: '{{model_name}}'
				},
				success: function(data) {
					 response(data.objects)
				}
			});
		},
		select : function(event, ui) {
			 if (ui.item) {
				$('#lookup_{{name}}').val(ui.item.label);
				 $("#id_{{name}}").val(ui.item.val);
				 $('#del_{{name}}').show();
			 } else {
				$('#lookup_{{name}}').val('');
				$('#id_{{name}}').val('');
				$('#del_{{name}}').hide();
			 }
			 return false;
		},
		minLength: 2
	});
});
$('#del_{{name}}').click(function(ele, event) {
	$('#id_{{name}}').val('');
	$('#del_{{name}}').hide();
	$('#lookup_{{name}}').val('');
});
</script>
